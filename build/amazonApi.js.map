{"version":3,"sources":["../src/amazonApi.js"],"names":["require","config","ProductAdvertisingAPIv1","defaultClient","ApiClient","instance","accessKey","process","env","ACCESS_KEY","secretKey","SECRET_KEY","host","HOST","region","REGION","api","DefaultApi","onSuccess","data","console","log","searchItemsResponse","SearchItemsResponse","constructFromObject","undefined","JSON","stringify","error_0","Promise","resolve","onError","error","searchItems","keywords","searchItemsRequest","SearchItemsRequest","PARTNER_TAG","then","result","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,IAAIC,uBAAuB,GAAGF,OAAO,CAAC,mBAAD,CAArC;;AAEA,IAAIG,aAAa,GAAGD,uBAAuB,CAACE,SAAxB,CAAkCC,QAAtD,C,CAEA;;AACAF,aAAa,CAACG,SAAd,GAA0BC,OAAO,CAACC,GAAR,CAAYC,UAAtC;AACAN,aAAa,CAACO,SAAd,GAA0BH,OAAO,CAACC,GAAR,CAAYG,UAAtC;AAEA;AACA;AACA;AACA;;AACAR,aAAa,CAACS,IAAd,GAAqBL,OAAO,CAACC,GAAR,CAAYK,IAAjC;AACAV,aAAa,CAACW,MAAd,GAAuBP,OAAO,CAACC,GAAR,CAAYO,MAAnC;AAEA,IAAIC,GAAG,GAAG,IAAId,uBAAuB,CAACe,UAA5B,EAAV;;SAEeC,S;;;;;uEAAf,iBAAyBC,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AACEC,YAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACIC,YAAAA,mBAFN,GAE4BpB,uBAAuB,CAACqB,mBAAxB,CAA4CC,mBAA5C,CAAgEL,IAAhE,CAF5B,EAGE;;AACA,gBAAIG,mBAAmB,CAAC,QAAD,CAAnB,KAAkCG,SAAtC,EAAiD;AAC/CL,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAY,8BAA8BK,IAAI,CAACC,SAAL,CAAeL,mBAAmB,CAAC,QAAD,CAAlC,EAA8C,IAA9C,EAAoD,CAApD,CAA1C;AACAF,cAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACIO,cAAAA,OAJ2C,GAIjCN,mBAAmB,CAAC,QAAD,CAAnB,CAA8B,CAA9B,CAJiC;AAK/CF,cAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBO,OAAO,CAAC,MAAD,CAApC;AACAR,cAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBO,OAAO,CAAC,SAAD,CAAvC;AACD;;AAXH,6CAaSC,OAAO,CAACC,OAAR,CAAgBR,mBAAmB,CAAC,cAAD,CAAnB,CAAoC,OAApC,CAAhB,CAbT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AA6CA,SAASS,OAAT,CAAiBC,KAAjB,EAAwB;AACtBZ,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,kCAAkCK,IAAI,CAACC,SAAL,CAAeK,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,CAA9C;AACAZ,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBW,KAAK,CAAC,QAAD,CAAnC;;AACA,MAAIA,KAAK,CAAC,UAAD,CAAL,KAAsBP,SAAtB,IAAmCO,KAAK,CAAC,UAAD,CAAL,CAAkB,MAAlB,MAA8BP,SAArE,EAAgF;AAC9EL,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBK,IAAI,CAACC,SAAL,CAAeK,KAAK,CAAC,UAAD,CAAL,CAAkB,MAAlB,CAAf,EAA0C,IAA1C,EAAgD,CAAhD,CAA/B;AACD;AACF;;SAEcC,W;;;;;yEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6BC,YAAAA,QAA7B,QAA6BA,QAA7B;AAEE;AAEIC,YAAAA,kBAJN,GAI2B,IAAIjC,uBAAuB,CAACkC,kBAA5B,EAJ3B;AAME;;AACAD,YAAAA,kBAAkB,CAAC,YAAD,CAAlB,GAAmC5B,OAAO,CAACC,GAAR,CAAY6B,WAA/C;AACAF,YAAAA,kBAAkB,CAAC,aAAD,CAAlB,GAAoC,YAApC;AAEA;;AACAA,YAAAA,kBAAkB,CAAC,UAAD,CAAlB,GAAiCD,QAAjC;AAEA;;AACAC,YAAAA,kBAAkB,CAAC,WAAD,CAAlB,GAAkC,CAAlC;AAEA;AACF;AACA;AACA;;AACEA,YAAAA,kBAAkB,CAAC,WAAD,CAAlB,GAAkC,CAAC,sBAAD,EAAyB,gBAAzB,EAA2C,uBAA3C,EAAoE,4BAApE,EAAkG,8BAAlG,EAAkI,6BAAlI,CAAlC;AApBF,8CAsBSnB,GAAG,CAACiB,WAAJ,CAAgBE,kBAAhB,EAAoCG,IAApC;AAAA,kFACL,kBAAenB,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACuBD,SAAS,CAACC,IAAD,CADhC;;AAAA;AACQoB,wBAAAA,MADR;AAAA,0DAESV,OAAO,CAACC,OAAR,CAAgBS,MAAhB,CAFT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADK;;AAAA;AAAA;AAAA;AAAA,iBAKL,UAASP,KAAT,EAAgB;AACdD,cAAAA,OAAO,CAACC,KAAD,CAAP;AACD,aAPI,CAtBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAiCAQ,MAAM,CAACC,OAAP,GAAiB;AACfR,EAAAA,WAAW,EAAEA;AADE,CAAjB","sourcesContent":["/**\n * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\n// Run `npm install` locally before executing following code with `node sampleSearchItemsApi.js`\n\n/**\n * This sample code snippet is for ProductAdvertisingAPI 5.0's SearchItems API\n * For more details, refer:\n * https://webservices.amazon.com/paapi5/documentation/search-items.html\n */\nrequire('dotenv').config();\nvar ProductAdvertisingAPIv1 = require('./AmazonApi/index');\n\nvar defaultClient = ProductAdvertisingAPIv1.ApiClient.instance;\n\n// Specify your credentials here. These are used to create and sign the request.\ndefaultClient.accessKey = process.env.ACCESS_KEY;\ndefaultClient.secretKey = process.env.SECRET_KEY;\n\n/**\n * PAAPI Host and Region to which you want to send request.\n * For more details refer: https://webservices.amazon.com/paapi5/documentation/common-request-parameters.html#host-and-region\n */\ndefaultClient.host = process.env.HOST;\ndefaultClient.region = process.env.REGION;\n\nvar api = new ProductAdvertisingAPIv1.DefaultApi();\n\nasync function onSuccess(data) {\n  console.log('API called successfully.');\n  var searchItemsResponse = ProductAdvertisingAPIv1.SearchItemsResponse.constructFromObject(data);\n  //console.log('Complete Response: \\n' + JSON.stringify(searchItemsResponse, null, 1));\n  if (searchItemsResponse['Errors'] !== undefined) {\n    console.log('Errors:');\n    console.log('Complete Error Response: ' + JSON.stringify(searchItemsResponse['Errors'], null, 1));\n    console.log('Printing 1st Error:');\n    var error_0 = searchItemsResponse['Errors'][0];\n    console.log('Error Code: ' + error_0['Code']);\n    console.log('Error Message: ' + error_0['Message']);\n  }\n\n  return Promise.resolve(searchItemsResponse['SearchResult']['Items']);\n\n  if (searchItemsResponse['SearchResult'] !== undefined) {\n    console.log('Printing First Item Information in SearchResult:');\n    var item_0 = searchItemsResponse['SearchResult']['Items'][0];\n    if (item_0 !== undefined) {\n      if (item_0['ASIN'] !== undefined) {\n        console.log('ASIN: ' + item_0['ASIN']);\n      }\n      if (item_0['DetailPageURL'] !== undefined) {\n        console.log('DetailPageURL: ' + item_0['DetailPageURL']);\n      }\n      if (\n        item_0['ItemInfo'] !== undefined &&\n        item_0['ItemInfo']['Title'] !== undefined &&\n        item_0['ItemInfo']['Title']['DisplayValue'] !== undefined\n      ) {\n        console.log('Title: ' + item_0['ItemInfo']['Title']['DisplayValue']);\n      }\n      if (\n        item_0['Offers'] !== undefined &&\n        item_0['Offers']['Listings'] !== undefined &&\n        item_0['Offers']['Listings'][0]['Price'] !== undefined &&\n        item_0['Offers']['Listings'][0]['Price']['DisplayAmount'] !== undefined\n      ) {\n        console.log('Buying Price: ' + item_0['Offers']['Listings'][0]['Price']['DisplayAmount']);\n      }\n    }\n  }\n\n}\n\nfunction onError(error) {\n  console.log('Error calling PA-API 5.0!');\n  console.log('Printing Full Error Object:\\n' + JSON.stringify(error, null, 1));\n  console.log('Status Code: ' + error['status']);\n  if (error['response'] !== undefined && error['response']['text'] !== undefined) {\n    console.log('Error Object: ' + JSON.stringify(error['response']['text'], null, 1));\n  }\n}\n\nasync function searchItems ({keywords}) {\n\n  // Request Initialization\n\n  var searchItemsRequest = new ProductAdvertisingAPIv1.SearchItemsRequest();\n\n  /** Enter your partner tag (store/tracking id) and partner type */\n  searchItemsRequest['PartnerTag'] = process.env.PARTNER_TAG;\n  searchItemsRequest['PartnerType'] = 'Associates';\n\n  /** Specify Keywords */\n  searchItemsRequest['Keywords'] = keywords;\n\n  /** Specify item count to be returned in search result */\n  searchItemsRequest['ItemCount'] = 2;\n\n  /**\n   * Choose resources you want from SearchItemsResource enum\n   * For more details, refer: https://webservices.amazon.com/paapi5/documentation/search-items.html#resources-parameter\n   */\n  searchItemsRequest['Resources'] = ['Images.Primary.Large', 'ItemInfo.Title', 'Offers.Listings.Price', 'Offers.Listings.Promotions', 'Offers.Summaries.LowestPrice', 'Offers.Listings.SavingBasis'];\n\n  return api.searchItems(searchItemsRequest).then(\n    async function(data) {\n      const result = await onSuccess(data);\n      return Promise.resolve(result)\n    },\n    function(error) {\n      onError(error);\n    }\n  );\n}\n\nmodule.exports = {\n  searchItems: searchItems\n}"],"file":"amazonApi.js"}